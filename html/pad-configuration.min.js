window.onload=function(){renderPad(defaultConfigData.row,defaultConfigData.pad,"#container");let t=_sl("#instrument");for(let a in instrumentCode)t.appendChild(new Option(instrumentCode[a][0]+" - "+instrumentCode[a][2],instrumentCode[a][0]));let e=_sls(".pupup-hide");for(let $=0;$<e.length;$++)e[$].addEventListener("click",function(t){t.target.closest(".popup").popupHide()});let o=_sls(".pad");for(let d=0;d<o.length;d++)o[d].addEventListener("click",function(t){testDrum(t.target.attr("data-code"))});_sl(".test-drum").addEventListener("click",function(t){testDrum(t.target.closest(".popup").querySelector("#instrument").value)}),_sl(".update-data").addEventListener("click",function(t){let a=_sl("#number").value,e=_sl("#instrument").value,$=_sl("#threshold").value,o=_sl("#headroom").value,d=_sl("#duration").value;setData(_sl("#f"+a),[e,$,o,d]),_sl("#popup-pad-setting").popupHide()},!1)};let defaultConfigData={row:[[9,10,11,12],[5,6,7,8],[1,2,3,4]],pad:{f1:[35,100,1e3,1e4,2e4],f2:[36,100,1e3,1e4,2e4],f3:[37,100,1e3,1e4,2e4],f4:[38,100,1e3,1e4,2e4],f5:[39,100,1e3,1e4,2e4],f6:[40,100,1e3,1e4,2e4],f7:[41,100,1e3,1e4,2e4],f8:[42,100,1e3,1e4,2e4],f9:[43,100,1e3,1e4,2e4],f10:[44,100,1e3,1e4,2e4],f11:[45,100,1e3,1e4,2e4],f12:[46,100,1e3,1e4,2e4]}};function testDrum(t){console.log("send note",t)}function resetToDefault(){if(confirm("Are you sure you want to reset the config?")){for(let t in defaultConfigData.pad)if(defaultConfigData.pad.hasOwnProperty(t)){let a;setData(_sl("#"+t),defaultConfigData.pad[t])}}}function renderPad(t,a,e){let $=_sl(e);for(let o=0;o<t.length;o++){let d=t[o],n=document.createElement("div");n.classList.add("row");for(let r=0;r<d.length;r++){let i=document.createElement("div");i.classList.add("pad-wrapper"),i.attr("data-ch",d[r]),i.appendChild(createButton(d[r],a)),i.appendChild(editor(d[r],a)),n.appendChild(i)}$.appendChild(n)}}function createButton(t,a){let e="f"+t,$=a[e]||[35,100,1e3,1e4,2e4],o=document.createElement("button");return o.classList.add("btn"),o.classList.add("btn-100"),o.classList.add("pad"),o.attr("data-number",t),o.attr("type","button"),o.attr("id",e),setData(o,$),o}function setData(t,a){let e=a[0];t.innerText=e,t.attr("title",instrumentCode["f"+e][2]),t.attr("data-code",e),t.attr("data-threshold",a[1]),t.attr("data-headroom",a[2]),t.attr("data-duration",a[3])}function editor(t,a){let e=document.createElement("div");e.classList.add("editor");let $=document.createElement("a");return $.classList.add("ctrl"),$.attr("href","javascript:"),$.attr("data-id",t),$.addEventListener("click",function(t){let a=getPadData(t),e=_sl("#popup-pad-setting");_sl("#number").value=t.target.attr("data-id"),_sl("#instrument").value=a["data-code"],_sl("#threshold").value=a["data-threshold"],_sl("#headroom").value=a["data-headroom"],_sl("#duration").value=a["data-duration"],e.popupShow()},!1),e.appendChild($),e}function getPadData(t){let a=t.target.parentNode.parentNode.querySelector(".pad");return{"data-code":a.attr("data-code"),"data-threshold":a.attr("data-threshold"),"data-headroom":a.attr("data-headroom"),"data-duration":a.attr("data-duration")}}function getFormData(t){let a=_sl(t).querySelectorAll("button"),e=[];for(let $=0;$<a.length;$++){let o=[];o.push(a[$].attr("id")+"="+a[$].attr("data-code")),o.push(a[$].attr("data-threshold")),o.push(a[$].attr("data-headroom")),o.push(a[$].attr("data-duration")),e.push(o.join(","))}return e.join("&")}function savePadConfig(){if(confirm("Are you sure you want to save the config?")){let t=getFormData("#container");console.log(t)}}let instrumentCode={f35:["35","B1","Acoustic Bass Drum"],f36:["36","C2","Bass Drum 1"],f37:["37","C#2","Side Stick"],f38:["38","D2","Acoustic Snare"],f39:["39","D#2","Hand Clap"],f40:["40","E2","Electric Snare"],f41:["41","F2","Low Floor Tom"],f42:["42","F#2","Closed Hi Hat"],f43:["43","G2","High Floor Tom"],f44:["44","G#2","Pedal Hi-Hat"],f45:["45","A2","Low Tom"],f46:["46","A#2","Open Hi-Hat"],f47:["47","B2","Low-Mid Tom"],f48:["48","C3","Hi Mid Tom"],f49:["49","C#3","Crash Cymbal 1"],f50:["50","D3","High Tom"],f51:["51","D#3","Ride Cymbal 1"],f52:["52","E3","Chinese Cymbal"],f53:["53","F3","Ride Bell"],f54:["54","F#3","Tambourine"],f55:["55","G3","Splash Cymbal"],f56:["56","G#3","Cowbell"],f57:["57","A3","Crash Cymbal 2"],f58:["58","A#3","Vibraslap"],f59:["59","B3","Ride Cymbal 2"],f60:["60","C4","Hi Bongo"],f61:["61","C#4","Low Bongo"],f62:["62","D4","Mute Hi Conga"],f63:["63","D#4","Open Hi Conga"],f64:["64","E4","Low Conga"],f65:["65","F4","High Timbale"],f66:["66","F#4","Low Timbale"],f67:["67","G4","High Agogo"],f68:["68","G#4","Low Agogo"],f69:["69","A4","Cabasa"],f70:["70","A#4","Maracas"],f71:["71","B4","Short Whistle"],f72:["72","C5","Long Whistle"],f73:["73","C#5","Short Guiro"],f74:["74","D5","Long Guiro"],f75:["75","D#5","Claves"],f76:["76","E5","Hi Wood Block"],f77:["77","F5","Low Wood Block"],f78:["78","F#5","Mute Cuica"],f79:["79","G5","Open Cuica"],f80:["80","G#5","Mute Triangle"],f81:["81","A5","Open Triangle"]};